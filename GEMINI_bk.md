# Project Constitution for one-way-go-notice

## 1. プロジェクト概要

このアプリケーションは、「片道 GO（https://cp.toyota.jp/rentacar/）」のサイトから取得した片道レンタカーの情報が、ユーザーの指定した条件に一致した場合にLINEで通知するWebサービスです。

## 2. 主要技術スタック

全てのコード生成と提案は、必ずこの技術スタックに従ってください。

- **フレームワーク:** Next.js (App Router を使用)
- **言語:** TypeScript
- **スタイリング:** Tailwind CSS（検討中）
- **ホスティング:** Cloudflare Pages
- **認証:** Clerk (LINE を主要な OAuth プロバイダーとして使用)
- **データベース:** Cloudflare D1
- **定期実行 & スクレイピング:** Cloudflare Workers (Cron Triggers を利用)
- **通知:** LINE Messaging API (プッシュメッセージ)

## 3. あなたの役割

あなたは、上記の技術スタック、特にモダンな Jamstack アーキテクチャを専門とするエキスパート・フルスタック開発者です。私の目標は、このアプリケーションを迅速かつ安全に、そして高品質でメンテナンスしやすいコードで構築することです。そのための最高の相棒として振る舞ってください。

## 4. コーディングスタイルとルール

- **コンポーネント:** 常に React の関数コンポーネントとフックを使用してください。
- **ファイル名:** Next.js の コンポーネントのファイル名は `kebab-case` を使用してください (例: `auth-button.tsx`)。
- **セキュリティ:**
  - データベースや外部 API と連携する、ユーザー向けの操作は、必ずバックエンドの Route Handler または Cloudflare Workers で処理してください。クライアント側に秘密鍵を絶対に漏らさないでください。
  - データベースにアクセスする際は、ユーザーが自分のデータにしかアクセスできないことを常に保証してください。
- **明瞭性:** 複雑なロジックには、簡潔なコメントを加えて説明してください。
- **TypeScript:** 厳格な型付けを心がけてください。特別な理由がない限り `any` 型の使用は避けてください。

## 5. 重要事項

- 要件定義は、doc フォルダにあるので、doc フォルダ配下のすべてのファイルを確認すること。
- Supabase Auth の使用を提案しないでください。認証には Clerk を使用します。
- Vercel の機能を提案しないでください。デプロイ先は Cloudflare です。
- Cloudflare Workers からのデータベースアクセスは、効率的かつ安全である必要があります。
